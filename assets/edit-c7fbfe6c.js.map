{"version":3,"file":"edit-c7fbfe6c.js","sources":["../../../../node_modules/react-spinners/esm/RingLoader.js","../../src/pages/edit.tsx"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from \"react\";\nimport { parseLengthAndUnit, cssValue } from \"./helpers/unitConverter\";\nimport { createAnimation } from \"./helpers/animation\";\nvar right = createAnimation(\"RingLoader\", \"0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}\", \"right\");\nvar left = createAnimation(\"RingLoader\", \"0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}\", \"left\");\nfunction RingLoader(_a) {\n    var _b = _a.loading, loading = _b === void 0 ? true : _b, _c = _a.color, color = _c === void 0 ? \"#000000\" : _c, _d = _a.speedMultiplier, speedMultiplier = _d === void 0 ? 1 : _d, _e = _a.cssOverride, cssOverride = _e === void 0 ? {} : _e, _f = _a.size, size = _f === void 0 ? 60 : _f, additionalprops = __rest(_a, [\"loading\", \"color\", \"speedMultiplier\", \"cssOverride\", \"size\"]);\n    var _g = parseLengthAndUnit(size), value = _g.value, unit = _g.unit;\n    var wrapper = __assign({ display: \"inherit\", width: cssValue(size), height: cssValue(size), position: \"relative\" }, cssOverride);\n    var style = function (i) {\n        return {\n            position: \"absolute\",\n            top: \"0\",\n            left: \"0\",\n            width: \"\".concat(value).concat(unit),\n            height: \"\".concat(value).concat(unit),\n            border: \"\".concat(value / 10).concat(unit, \" solid \").concat(color),\n            opacity: \"0.4\",\n            borderRadius: \"100%\",\n            animationFillMode: \"forwards\",\n            perspective: \"800px\",\n            animation: \"\".concat(i === 1 ? right : left, \" \").concat(2 / speedMultiplier, \"s 0s infinite linear\"),\n        };\n    };\n    if (!loading) {\n        return null;\n    }\n    return (React.createElement(\"span\", __assign({ style: wrapper }, additionalprops),\n        React.createElement(\"span\", { style: style(1) }),\n        React.createElement(\"span\", { style: style(2) })));\n}\nexport default RingLoader;\n","import React, {\n  ReactNode, useEffect, useMemo, useState,\n} from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Helmet } from 'react-helmet'\nimport JSON5 from 'json5'\nimport { useWeb3 } from '@/lib/hooks'\nimport {\n  httpURL, regexify, deregexify, extractMessage,\n} from '@/lib/helpers'\nimport { HomeLink, OptionsForm } from '@/components'\nimport type { ERC1155Metadata, Maybe } from '@/lib/types'\nimport { RingLoader } from 'react-spinners'\nimport '../styles/edit.css'\n\nexport const Edit = () => {\n  const { nftId } = useParams()\n  const tokenId = useMemo(() => deregexify(nftId), [nftId])\n  const [metadata, setMetadata] = useState<Maybe<ERC1155Metadata>>()\n  const [metaURI, setMetaURI] = useState<Maybe<string>>()\n  const [error, setError] = useState<ReactNode>()\n  const { roContract } = useWeb3()\n\n  useEffect(() => {\n    const getMetadata = async () => {\n      if(roContract && tokenId) {\n        try {\n          const metaURI = await roContract('uri', [tokenId]) as string\n          const url = httpURL(metaURI)\n          if(!metaURI || metaURI === '') {\n            setMetadata({})\n          } else {\n            const response = await fetch(url)\n            const body = await response.text()\n            try {\n              setMetadata(JSON5.parse(body))\n              setMetaURI(metaURI)\n            } catch(error) {\n              console.error({ url, tokenId, metaURI, error, body })\n              throw error\n            }\n          }\n        } catch(err) {\n          setMetadata(null)\n          setError(extractMessage(err))\n        }\n      }\n    }\n\n    getMetadata()\n  }, [roContract, tokenId])\n\n  return (\n    <main id=\"edit\">\n      <Helmet>\n        <title>‚Äôùñàùñçùñéùñäùñõùñä: ‚Ñ∞ùíπùíæùìâ #{tokenId && regexify(tokenId)}</title>\n      </Helmet>\n      <HomeLink/>\n      {error && (\n        <aside className=\"error\">\n          <span>`setMetadata` Error</span>\n          <span>{error}</span>\n        </aside>\n      )}\n      {metadata === undefined ? (\n        <aside>\n          <RingLoader color=\"#36d7b7\"/>\n          <span>Loading {metaURI}‚Ä¶</span>\n        </aside>\n      ) : (\n        <OptionsForm\n          purpose=\"update\"\n          {...{ tokenId, metadata, metaURI }}\n        />\n      )}\n    </main>\n  )\n}\n\nexport default Edit"],"names":["this","React.createElement","useMemo","useState","useEffect","metaURI","JSON5","error","Helmet"],"mappings":"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","x_google_ignoreList":[0]}